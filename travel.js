var locations = [
    {"name": "Aberdeen", "x": "101.780", "y": "-42.050"},
    {"name": "Aesir", "x": "60.018", "y": "59.999"},
    {"name": "Aesir - Bestla", "x": "60.016", "y": "60.002"},
    {"name": "Aesir - Borr", "x": "60.013", "y": "59.999"},
    {"name": "Aesir - Odin", "x": "60.014", "y": "60.001"},
    {"name": "Albion", "x": "14.170", "y": "16.000"},
    {"name": "Albion - Avalon", "x": "14.171", "y": "15.994"},
    {"name": "Angel", "x": "113.600", "y": "-44.200"},
    {"name": "Anson's World", "x": "40.500", "y": "39.400"},
    {"name": "Anson's World - Spider", "x": "40.500", "y": "39.392"},
    {"name": "Anson's World - Steele", "x": "40.501", "y": "39.399"},
    {"name": "Anson's World - Varley", "x": "40.497", "y": "39.394"},
    {"name": "Anvil", "x": "60.300", "y": "60.500"},
    {"name": "Anvil - Hammer", "x": "60.304", "y": "60.498"},
    {"name": "Aphrodite", "x": "-57.518", "y": "-39.550"},
    {"name": "Aphrodite - Anton", "x": "-57.524", "y": "-39.558"},
    {"name": "Aphrodite - Hill", "x": "-57.524", "y": "-39.551"},
    {"name": "Aphrodite - Sturges", "x": "-57.523", "y": "-39.549"},
    {"name": "Aphrodite - Thornley", "x": "-57.528", "y": "-39.564"},
    {"name": "Ariel", "x": "2.100", "y": "20.500"},
    {"name": "Ariel - Ariopolis", "x": "2.097", "y": "20.504"},
    {"name": "Ariel - Poseidon", "x": "2.097", "y": "20.507"},
    {"name": "Ariel - Shiva", "x": "2.098", "y": "20.505"},
    {"name": "Athens", "x": "-39.209", "y": "-46.200"},
    {"name": "Athens - Ahnooie", "x": "-39.212", "y": "-46.198"},
    {"name": "Athens - Argabuthon", "x": "-39.211", "y": "-46.201"},
    {"name": "Athens - Ormuzd", "x": "-39.210", "y": "-46.204"},
    {"name": "Athens - Whitefall", "x": "-39.216", "y": "-46.199"},
    {"name": "Beaumonde", "x": "123.000", "y": "-52.500"},
    {"name": "Beaumonde - Hastur", "x": "122.994", "y": "-52.500"},
    {"name": "Bellerophon", "x": "-17.700", "y": "8.200"},
    {"name": "Bellerophon - Parth", "x": "-17.701", "y": "8.197"},
    {"name": "Bellerophon - Tyrins", "x": "-17.693", "y": "8.195"},
    {"name": "Bellerophon - Xanthus", "x": "-17.707", "y": "8.192"},
    {"name": "Bernadette", "x": "-8.000", "y": "2.000"},
    {"name": "Bernadette - Nautilus", "x": "-7.996", "y": "2.001"},
    {"name": "Bernadette - Spinrad", "x": "-8.004", "y": "1.994"},
    {"name": "Beylix", "x": "104.003", "y": "-52.200"},
    {"name": "Beylix - Charity", "x": "104.005", "y": "-52.204"},
    {"name": "Beylix - Cinote", "x": "104.006", "y": "-52.194"},
    {"name": "Beylix - St. Lucius", "x": "103.997", "y": "-52.196"},
    {"name": "Boros", "x": "-48.850", "y": "-49.200"},
    {"name": "Brisingamen", "x": "60.300", "y": "60.200"},
    {"name": "Brisingamen - Alberich", "x": "60.292", "y": "60.201"},
    {"name": "Brisingamen - Beowulf", "x": "60.291", "y": "60.205"},
    {"name": "Brisingamen - Freya", "x": "60.291", "y": "60.208"},
    {"name": "Constance", "x": "111.400", "y": "-49.550"},
    {"name": "Constance - Barrowclough", "x": "111.394", "y": "-49.551"},
    {"name": "Constance - Disraeli", "x": "111.386", "y": "-49.550"},
    {"name": "Daedulus (GG)", "x": "-39.000", "y": "-54.350"},
    {"name": "Daedulus (GG) - Arvad's Helm", "x": "-39.005", "y": "-54.355"},
    {"name": "Daedulus (GG) - Box", "x": "-39.008", "y": "-49.547"},
    {"name": "Daedulus (GG) - Notterdam", "x": "-39.001", "y": "-54.354"},
    {"name": "Daedulus (GG) - Rea", "x": "-39.011", "y": "-54.358"},
    {"name": "Deadwood", "x": "-165.000", "y": "36.850"},
    {"name": "Deadwood - Haven", "x": "-164.996", "y": "36.851"},
    {"name": "Deadwood - New Omaha", "x": "-164.993", "y": "36.851"},
    {"name": "Delphi", "x": "114.450", "y": "-51.590"},
    {"name": "Delphi - Calliope", "x": "114.445", "y": "-51.588"},
    {"name": "Delphi - Clio", "x": "114.453", "y": "-51.587"},
    {"name": "Delphi - Thalia", "x": "114.452", "y": "-51.581"},
    {"name": "Di Yu", "x": "-56.580", "y": "-47.550"},
    {"name": "Di Yu - Yama", "x": "-56.581", "y": "-47.548"},
    {"name": "Djinn's Bane (GG)", "x": "115.000", "y": "-61.000"},
    {"name": "Djinn's Bane (GG) - Hilal", "x": "114.997", "y": "-61.001"},
    {"name": "Djinn's Bane (GG) - Hubal", "x": "114.999", "y": "-61.008"},
    {"name": "Djinn's Bane (GG) - Illat", "x": "114.996", "y": "-61.004"},
    {"name": "Djinn's Bane (GG) - Sin", "x": "114.997", "y": "-61.001"},
    {"name": "Djinn's Bane (GG) - Ta'lab", "x": "114.995", "y": "-61.000"},
    {"name": "Djinn's Bane (GG) - Wadd", "x": "114.995", "y": "-61.003"},
    {"name": "Dragon's Egg (GG)", "x": "-182.620", "y": "41.310"},
    {"name": "Dragon's Egg (GG) - Bhima", "x": "-182.629", "y": "41.309"},
    {"name": "Dragon's Egg (GG) - Glynis", "x": "-182.634", "y": "41.306"},
    {"name": "Dragon's Egg (GG) - Nakula", "x": "-182.641", "y": "41.310"},
    {"name": "Dragon's Egg (GG) - Sahadeva", "x": "-182.638", "y": "41.306"},
    {"name": "Dragon's Egg (GG) - Yudhishtira", "x": "-182.644", "y": "41.309"},
    {"name": "Elphame (GG)", "x": "-51.800", "y": "-53.100"},
    {"name": "Elphame (GG) - Fiddler's Green", "x": "-51.801", "y": "-53.100"},
    {"name": "Elphame (GG) - Ithendra", "x": "-51.793", "y": "-53.098"},
    {"name": "Elphame (GG) - Summerhome", "x": "-51.794", "y": "-53.093"},
    {"name": "Elphame (GG) - Sweethome", "x": "-51.800", "y": "-53.094"},
    {"name": "Ezra", "x": "-48.250", "y": "-48.250"},
    {"name": "Ezra - Herschel", "x": "-48.246", "y": "-48.243"},
    {"name": "Fury (GG)", "x": "-179.150", "y": "48.100"},
    {"name": "Fury (GG) - Blackwood", "x": "-179.151", "y": "48.102"},
    {"name": "Fury (GG) - Coldstone", "x": "-179.156", "y": "48.101"},
    {"name": "Fury (GG) - Seventh Circle", "x": "-179.148", "y": "48.107"},
    {"name": "Ghost", "x": "121.607", "y": "-46.899"},
    {"name": "Ghost - Inferno", "x": "121.606", "y": "-46.897"},
    {"name": "Ghost - Xibalia", "x": "121.603", "y": "-46.891"},
    {"name": "Glacier", "x": "109.340", "y": "-46.340"},
    {"name": "Glacier - Denali", "x": "109.337", "y": "-46.346"},
    {"name": "Gonghe", "x": "11.980", "y": "-3.100"},
    {"name": "Grasshopper Station", "x": "0.000", "y": "-50.000"},
    {"name": "Greenleaf", "x": "41.500", "y": "46.000"},
    {"name": "Greenleaf - Agyar", "x": "41.507", "y": "45.995"},
    {"name": "Greenleaf - Bryson's Rock", "x": "41.501", "y": "46.005"},
    {"name": "Greenleaf - Dyton", "x": "41.502", "y": "46.002"},
    {"name": "Harvest", "x": "52.500", "y": "55.120"},
    {"name": "Harvest - Farraday", "x": "52.506", "y": "55.119"},
    {"name": "Harvest - Higgins' Moon", "x": "52.496", "y": "55.117"},
    {"name": "Heaven (GG)", "x": "107.190", "y": "-47.480"},
    {"name": "Heaven (GG) - Menaka", "x": "107.189", "y": "-47.477"},
    {"name": "Heaven (GG) - Rambha", "x": "107.192", "y": "-47.481"},
    {"name": "Heaven (GG) - Tilottama", "x": "107.184", "y": "-47.489"},
    {"name": "Heaven (GG) - Urvasi", "x": "107.184", "y": "-47.483"},
    {"name": "Hera", "x": "-56.967", "y": "-39.006"},
    {"name": "Hera - Bullet", "x": "-56.968", "y": "-39.010"},
    {"name": "Hera - Eris", "x": "-56.967", "y": "-39.005"},
    {"name": "Highgate", "x": "-169.650", "y": "56.250"},
    {"name": "Highgate - Perth", "x": "-169.651", "y": "56.247"},
    {"name": "Ithaca", "x": "-46.200", "y": "-46.200"},
    {"name": "Ithaca - Priam", "x": "-46.205", "y": "-46.191"},
    {"name": "Jiangyin", "x": "47.500", "y": "48.000"},
    {"name": "Jiangyin - Dangun", "x": "47.501", "y": "48.004"},
    {"name": "Jiangyin - Rhilidore", "x": "47.500", "y": "48.003"},
    {"name": "Jubilee", "x": "38.000", "y": "56.180"},
    {"name": "Jubilee - Covenant", "x": "38.002", "y": "56.179"},
    {"name": "Kerry", "x": "-46.600", "y": "-49.200"},
    {"name": "Lazarus", "x": "61.700", "y": "34.300"},
    {"name": "Lazarus - Dora", "x": "61.703", "y": "34.309"},
    {"name": "Liann Jiun", "x": "-4.300", "y": "9.990"},
    {"name": "Liann Jiun - Fu", "x": "-4.295", "y": "9.987"},
    {"name": "Liann Jiun - Tiantan", "x": "-4.297", "y": "9.992"},
    {"name": "Liann Jiun - Xing Yun", "x": "-4.295", "y": "9.993"},
    {"name": "Londinium", "x": "1.000", "y": "9.000"},
    {"name": "Londinium - Balkerne", "x": "1.001", "y": "9.007"},
    {"name": "Londinium - Colchester", "x": "1.002", "y": "9.008"},
    {"name": "Meadow", "x": "-40.000", "y": "-36.690"},
    {"name": "Meadow - Mir", "x": "-40.002", "y": "-36.696"},
    {"name": "Meadow - Salyut", "x": "-40.007", "y": "-36.694"},
    {"name": "Meridian", "x": "-174.150", "y": "46.490"},
    {"name": "Meridian - Burnet", "x": "-174.147", "y": "46.489"},
    {"name": "Miranda", "x": "-184.952", "y": "68.004"},
    {"name": "Miranda - Caliban", "x": "-184.952", "y": "68.009"},
    {"name": "Moab", "x": "59.900", "y": "59.300"},
    {"name": "Moab - Mesa", "x": "59.907", "y": "59.299"},
    {"name": "Moab - Red Rock", "x": "59.908", "y": "59.301"},
    {"name": "Muir", "x": "-170.125", "y": "46.300"},
    {"name": "Muir - Arminius", "x": "-170.120", "y": "46.298"},
    {"name": "Muir - Shepherd's Mission", "x": "-170.117", "y": "46.296"},
    {"name": "Mycroft - Mycroft", "x": "-170.117", "y": "46.297"},
    {"name": "New Canaan", "x": "-173.200", "y": "50.000"},
    {"name": "New Canaan - Lilac", "x": "-173.195", "y": "50.006"},
    {"name": "New Canaan - Ugarit", "x": "-173.192", "y": "50.004"},
    {"name": "New Kasmir", "x": "111.000", "y": "-53.350"},
    {"name": "New Melbourne", "x": "50.025", "y": "48.000"},
    {"name": "New Melbourne - Destiny", "x": "50.029", "y": "48.003"},
    {"name": "New Melbourne - Maria", "x": "50.031", "y": "48.005"},
    {"name": "Newhall", "x": "104.100", "y": "-52.100"},
    {"name": "Newhall - Darcke", "x": "104.101", "y": "-52.097"},
    {"name": "Newhall - Mohenrichia", "x": "104.093", "y": "-52.098"},
    {"name": "Newhall -Severance", "x": "104.084", "y": "-52.095"},
    {"name": "Newhope", "x": "-37.750", "y": "-55.230"},
    {"name": "Newhope - Godforsaken", "x": "-37.755", "y": "-52.099"},
    {"name": "Newhope - Splendor", "x": "-37.747", "y": "-55.229"},
    {"name": "Newhope - The Commons", "x": "-37.744", "y": "-55.230"},
    {"name": "Oberon", "x": "103.900", "y": "-52.300"},
    {"name": "Oberon - Bottom", "x": "103.904", "y": "-52.299"},
    {"name": "Oberon - Puck", "x": "103.906", "y": "-52.305"},
    {"name": "Oberon - Quince", "x": "103.910", "y": "-52.304"},
    {"name": "Osiris", "x": "9.550", "y": "9.550"},
    {"name": "Osiris - Epeuva", "x": "9.548", "y": "9.555"},
    {"name": "Osiris - Tannhauser", "x": "9.544", "y": "9.541"},
    {"name": "Paquin", "x": "61.000", "y": "35.000"},
    {"name": "Paquin - Clawthorn", "x": "61.003", "y": "35.001"},
    {"name": "Paquin - Shinbone", "x": "61.005", "y": "35.004"},
    {"name": "Pelorum", "x": "25.000", "y": "17.500"},
    {"name": "Pelorum - Kaleidoscope", "x": "24.993", "y": "17.498"},
    {"name": "Pericles Station", "x": "-100", "y": "50"},
    {"name": "Persephone", "x": "24.500", "y": "17.000"},
    {"name": "Persephone - Hades", "x": "24.499", "y": "17.009"},
    {"name": "Persephone - Renao", "x": "24.496", "y": "17.005"},
    {"name": "Prophet", "x": "-51.000", "y": "-46.000"},
    {"name": "Prophet - Dunny", "x": "-51.007", "y": "-45.994"},
    {"name": "Prophet - Perdido", "x": "-50.999", "y": "-45.991"},
    {"name": "Regina", "x": "-47.510", "y": "-47.490"},
    {"name": "Regina - Alexandria", "x": "-47.516", "y": "-47.483"},
    {"name": "Regina - Ares", "x": "-47.517", "y": "-47.487"},
    {"name": "Regina - Turrent's Moon", "x": "-47.517", "y": "-47.484"},
    {"name": "Rock Haven", "x": "45", "y": "-27"},
    {"name": "Rubicon", "x": "1.660", "y": "13.020"},
    {"name": "Salisbury", "x": "120.000", "y": "-36.800"},
    {"name": "Santo", "x": "16.299", "y": "0.016"},
    {"name": "Santo - New Luxor", "x": "16.303", "y": "0.012"},
    {"name": "Santo - Tethys", "x": "16.303", "y": "0.013"},
    {"name": "Shadow", "x": "-56.962", "y": "-38.983"},
    {"name": "Shadow - Branson's Mark", "x": "-56.965", "y": "-38.984"},
    {"name": "Shadow - Ossolambria", "x": "-56.963", "y": "-38.983"},
    {"name": "Shadow - Summerfair", "x": "-56.959", "y": "-38.986"},
    {"name": "Sho-Je Downs", "x": "111.850", "y": "-48.000"},
    {"name": "Sho-Je Downs - Kuan Lo", "x": "111.844", "y": "-48.009"},
    {"name": "Sho-Je Downs - Miyazaki", "x": "111.843", "y": "-48.011"},
    {"name": "Sihnon", "x": "Ariel", "y": "-1.335"},
    {"name": "Sihnon - Airen", "x": "9.279", "y": "-1.335"},
    {"name": "Sihnon - Xiansheng", "x": "9.277", "y": "-1.336"},
    {"name": "Sihnon - Xiaojie", "x": "9.274", "y": "-1.339"},
    {"name": "Silverhold", "x": "62.300", "y": "34.700"},
    {"name": "Silverhold - Beggar's Tin", "x": "62.296", "y": "34.692"},
    {"name": "St. Albans", "x": "52.000", "y": "38.600"},
    {"name": "St. Albans - Pi Gu", "x": "51.999", "y": "38.603"},
    {"name": "Three Hills", "x": "-54.000", "y": "-59.225"},
    {"name": "Three Hills - Bob", "x": "-54.000", "y": "-59.226"},
    {"name": "Three Hills - Conrad", "x": "-53.996", "y": "-59.228"},
    {"name": "Three Hills - New Lafayette", "x": "-53.996", "y": "-59.221"},
    {"name": "Tongyi", "x": "-53.999", "y": "-59.215"},
    {"name": "Triumph", "x": "61.544", "y": "34.527"},
    {"name": "Valentine", "x": "13.510", "y": "-13.497"},
    {"name": "Valentine - Chons", "x": "13.515", "y": "-13.502"},
    {"name": "Valentine - Selene", "x": "13.516", "y": "-13.504"},
    {"name": "Verbena", "x": "110.000", "y": "-47.250"},
    {"name": "Verbena - Barrimend", "x": "110.002", "y": "-47.247"},
    {"name": "Verbena - Lassek", "x": "109.999", "y": "-47.244"},
    {"name": "Vishnu", "x": "113.470", "y": "-49.150"},
    {"name": "Vishnu - Ganesha", "x": "113.476", "y": "-49.145"},
    {"name": "Vishnu - Rama", "x": "113.476", "y": "-49.150"},
    {"name": "Whittier", "x": "111.000", "y": "-42.275"},
    {"name": "Zephyr", "x": "108.400", "y": "-44.200"},
    {"name": "Zeus (GG)", "x": "121.150", "y": "-54.630"},
    {"name": "Zeus (GG) - Betty", "x": "121.148", "y": "-54.634"},
    {"name": "Zeus (GG) - Delynn", "x": "121.150", "y": "-54.637"},
    {"name": "Zeus (GG) - Gayle", "x": "121.143", "y": "-54.634"},
    {"name": "Zeus (GG) - Isabel", "x": "121.143", "y": "-54.630"},
    {"name": "Zeus (GG) - Sophie", "x": "121.142", "y": "-54.627"},
    {"name": "Zeus (GG) - Victoria", "x": "121.143", "y": "-54.622"}
];

var lookup = {};
for( var i = 0, len = locations.length; i < len; i++ ) {
    lookup[locations[i].name] = locations[i];
}

function calculate_distance() {
    var origin = lookup[$("#origin").val()];
    var dest = lookup[$("#destination").val()];
    var speed = $("#speed").val();
    var speed = $("#speed").val();
    var hours_per_au = $("#base-speed").val();

    var distance = Math.sqrt((Math.pow((origin.x-dest.x),2))+Math.pow((origin.y-dest.y),2));

    var time = (distance * (hours_per_au/speed));
    if( distance < 0.055 ) {
        time *= 60;
    }
    var duration_precise = moment.preciseDiff(moment(), moment().add('hours', time));

    var abbr = $("<abbr>", { title: time.toFixed(3)+" hours", text: duration_precise});
    $("#res-distance").text(distance.toFixed(4));
    $("#res-time").empty().prepend(abbr);
    var arrow = $("<span class='glyphicon glyphicon-arrow-right'></span>");
    var origin_txt = $("<span>").text(origin.name+" ");
    var dest_txt = $("<span>").text(" "+dest.name);
    $("#itinerary").empty().prepend(dest_txt).prepend(arrow).prepend(origin_txt);
    $("#results").show();
}

$(function() {
    var sel_origin= $("#origin");
    var sel_dest= $("#destination");
    $.each(locations, function(i, loc) {
        var $option = $("<option>", {
                text: loc.name,
                value: loc.name
        });
        $option.appendTo(sel_origin);
        $option.clone().appendTo(sel_dest);
    });
    sel_origin.chosen();
    sel_dest.chosen();
    $('#travel-calc :input').change(function(){
        calculate_distance();
    });
    $("#results").hide();
});
